(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[221],{5710:function(e,t,r){Promise.resolve().then(r.bind(r,3478))},3478:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return A}});var a=r(3827),s=r(4090),l=r(7907),i=r(6858);let o="/api",n=(0,s.createContext)(void 0);function c(e){let{children:t}=e,[r,c]=(0,s.useState)(()=>(0,i.gY)()),[d,u]=(0,s.useState)(!1),x=(0,l.useSearchParams)();(0,s.useEffect)(()=>{let e=(0,i.bW)(),t=x.get("project")||(0,i.NL)(),r=(0,i.nt)();(async()=>{try{var a,s;let l;if(!e){let e={...r,generationStatus:"idle",generationError:null};c(e),(0,i.v0)(e),u(!0);return}let n=await fetch("".concat(o,"/projects"),{headers:{Authorization:"Bearer ".concat(e)}});if(!n.ok)throw Error("Failed to load projects");let d=await n.json();if(!d.projects.length){let e={...r,generationStatus:"idle",generationError:null};c(e),(0,i.v0)(e),u(!0);return}let x=null!==(a=d.projects.find(e=>e.id===t))&&void 0!==a?a:d.projects[0],m=await fetch("".concat(o,"/projects/").concat(x.id),{headers:{Authorization:"Bearer ".concat(e)}});if(!m.ok)throw Error("Failed to load project");let f=await m.json(),p=await Promise.all(f.generations.map(async t=>{let r=await fetch("".concat(o,"/generations/").concat(t.id,"/image"),{headers:{Authorization:"Bearer ".concat(e)}});if(!r.ok)throw Error("Failed to load image.");let a=await r.blob(),s=URL.createObjectURL(a);return{id:t.id,imageUrl:s,description:t.description,createdAt:t.created_at,source:"api"}}));if(f.project.slide_image_path)try{let t=await fetch("".concat(o,"/projects/").concat(f.project.id,"/slide-image"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.blob();l=await new Promise((t,r)=>{let a=new FileReader;a.onload=()=>t(a.result),a.onerror=()=>r(a.error),a.readAsDataURL(e)})}}catch(e){l=void 0}let b={id:f.project.id,name:f.project.name,createdAt:f.project.created_at,updatedAt:f.project.updated_at,autosaveStatus:"ready",prompt:null!==(s=f.project.last_prompt)&&void 0!==s?s:"",slideImage:l,results:p,generationStatus:"idle",generationError:null,pendingSlots:0};c(b),(0,i.v0)(b),(0,i.dN)(f.project.id),u(!0)}catch(t){let e={...r,generationStatus:"idle",generationError:null};c(e),(0,i.v0)(e),u(!0)}})()},[]);let m=(0,s.useCallback)(e=>{c(t=>{let r={...t,...e,updatedAt:new Date().toISOString()};return(0,i.v0)(r),r})},[]),f=(0,s.useCallback)(e=>{c(t=>{let r={...t,prompt:e,updatedAt:new Date().toISOString()};return(0,i.v0)(r),r})},[]),p=(0,s.useCallback)(e=>{c(t=>({...t,autosaveStatus:e}))},[]),b=(0,s.useCallback)(e=>{c(t=>{var r;let a=[...null!==(r=t.results)&&void 0!==r?r:[],...e].slice(-12),s={...t,results:a,generationError:null,updatedAt:new Date().toISOString(),pendingSlots:Math.max(t.pendingSlots-e.length,0)};return(0,i.v0)(s),s})},[]),g=(0,s.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;c(r=>{let a={...r,generationStatus:e,generationError:t,updatedAt:new Date().toISOString()};return(0,i.v0)(a),a})},[]),h=(0,s.useCallback)(e=>{c(t=>{let r={...t,pendingSlots:e};return(0,i.v0)(r),r})},[]),v=(0,s.useCallback)(async e=>{var t,a;let s=(0,i.bW)();if(!s)throw Error("Authentication required.");if(!(await fetch("".concat(o,"/projects/").concat(r.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({name:e,prompt:null!==(t=r.prompt)&&void 0!==t?t:"",slide_context:null!==(a=r.prompt)&&void 0!==a?a:""})})).ok)throw Error("Unable to rename project.");m({name:e})},[r.id,r.prompt,m]),y=(0,s.useMemo)(()=>({project:r,isHydrated:d,updateProject:m,updatePrompt:f,setAutosaveStatus:p,appendGenerationResults:b,setGenerationState:g,setPendingSlots:h,renameProject:v}),[r,d,m,f,p,b,g,h,v]);return(0,a.jsx)(n.Provider,{value:y,children:t})}function d(){let e=(0,s.useContext)(n);if(!e)throw Error("useWorkspaceProject must be used within WorkspaceProjectProvider");return e}let u=e=>{let t=e.split("\n"),r="message",a=[];return t.forEach(e=>{e.startsWith("event:")?r=e.replace("event:","").trim():e.startsWith("data:")&&a.push(e.replace("data:","").trim())}),{event:r,data:a.join("\n")}},x=e=>new Promise((t,r)=>{let a=new FileReader;a.onload=()=>t(a.result),a.onerror=()=>r(a.error),a.readAsDataURL(e)}),m=async(e,t)=>{if(e.startsWith("data:"))return e;let r=await fetch(e,{headers:{Authorization:"Bearer ".concat(t)}});if(!r.ok)throw Error("Unable to load slide image.");return x(await r.blob())};function f(){let{project:e,appendGenerationResults:t,setGenerationState:r,setPendingSlots:l}=d(),[o,n]=(0,s.useState)(null),[c,x]=(0,s.useState)("square"),[f,p]=(0,s.useState)(3),b="generating"===e.generationStatus,g=async()=>{if(!e.slideImage){n("Upload a slide screenshot first.");return}n(null),r("generating"),l(f);try{var a,s;let o=(0,i.bW)();if(!o){r("error","Authentication required."),n("Please log in to generate visuals."),l(0);return}let d=await m(e.slideImage,o),x=await fetch("".concat("/api","/generate"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify({project_name:e.name,prompt:null!==(a=e.prompt)&&void 0!==a?a:"",slide_context:null!==(s=e.prompt)&&void 0!==s?s:"",slide_image_base64:d,variant_count:f,creativity:.7,aspect_ratio:c})});if(!x.ok||!x.body){let e=await x.text();throw Error(e||"Request failed with status ".concat(x.status))}let p=x.body.getReader(),b=new TextDecoder,g="";for(;;){let{value:e,done:a}=await p.read();if(a)break;let s=(g+=b.decode(e,{stream:!0})).indexOf("\n\n");for(;-1!==s;){let e=g.slice(0,s).trim();if(s=(g=g.slice(s+2)).indexOf("\n\n"),!e)continue;let a=u(e);if("result"===a.event){let e=JSON.parse(a.data);t([{id:e.id,imageUrl:"data:image/png;base64,".concat(e.image_base64),description:e.description,createdAt:e.created_at,source:"api"}])}else if("error"===a.event){let e=JSON.parse(a.data).message||"Unknown error";r("error",e),n("Unable to generate visuals: ".concat(e)),p.cancel();return}else if("done"===a.event){r("idle"),l(0),p.cancel();return}}}r("idle"),l(0)}catch(t){let e=t instanceof Error?t.message:"Unknown error";r("error",e),n("Unable to generate visuals: ".concat(e)),l(0)}};return(0,a.jsxs)("section",{className:"border-b border-gray-200 px-6 py-6",children:[(0,a.jsx)("header",{children:(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-gray-400",children:"Generate"})}),(0,a.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",htmlFor:"ratio",children:["Aspect ratio",(0,a.jsxs)("select",{id:"ratio",name:"ratio",value:c,onChange:e=>x(e.target.value),className:"mt-2 w-full rounded-2xl border border-gray-200 px-3 py-2 text-sm text-gray-900 focus-visible:border-red-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-100",children:[(0,a.jsx)("option",{value:"square",children:"Square (1:1)"}),(0,a.jsx)("option",{value:"portrait_9x16",children:"9:16 (Story/Portrait)"}),(0,a.jsx)("option",{value:"landscape_16x9",children:"16:9 (Widescreen)"})]})]}),(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",htmlFor:"variant-count",children:["Number of visuals",(0,a.jsx)("select",{id:"variant-count",name:"variant-count",value:f,onChange:e=>p(Number(e.target.value)),className:"mt-2 w-full rounded-2xl border border-gray-200 px-3 py-2 text-sm text-gray-900 focus-visible:border-red-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-100",children:[1,2,3,4,5].map(e=>(0,a.jsxs)("option",{value:e,children:[e," ",1===e?"visual":"visuals"]},e))})]}),(0,a.jsx)("button",{type:"button",onClick:g,disabled:b,className:"w-full rounded-full bg-red-600 px-4 py-3 text-sm font-semibold text-white transition hover:bg-red-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-500 disabled:cursor-not-allowed disabled:bg-red-300",children:b?"Generating...":"Generate ".concat(f," ").concat(1===f?"visual":"visuals")}),o?(0,a.jsx)("p",{className:"text-xs font-semibold text-red-600",children:o}):(0,a.jsx)("p",{className:"text-xs text-gray-500",children:b?"Generating visuals sequentially...":"Results appear one by one as soon as they are ready."})]})]})}let p=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}),b=e=>{let t=new Date(e);return Number.isNaN(t.getTime())?"Created just now":"Created ".concat(p.format(t))};function g(e){let{name:t,autosaveStatus:r,createdAt:l,onRename:i}=e,[o,n]=(0,s.useState)(!1),[c,d]=(0,s.useState)(t);return(0,s.useEffect)(()=>{o||d(t)},[t,o]),(0,a.jsxs)("section",{className:"border-b border-gray-200 px-6 py-6",children:[(0,a.jsxs)("header",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-gray-400",children:"Project"}),(0,a.jsx)("button",{type:"button",onClick:o?()=>{d(t),n(!1)}:()=>n(!0),className:"text-xs font-semibold text-red-600 hover:text-red-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-500",children:o?"Cancel":"Rename"})]}),(0,a.jsxs)("div",{className:"mt-4 space-y-2",children:[o?(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i(c),n(!1)},className:"space-y-3",children:[(0,a.jsx)("input",{type:"text",name:"project-name",value:c,onChange:e=>d(e.target.value),autoFocus:!0,placeholder:"Project name",className:"w-full rounded-2xl border border-gray-200 px-4 py-2 text-sm font-semibold text-gray-900 focus-visible:border-red-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-100"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{type:"submit",className:"rounded-full bg-red-600 px-4 py-2 text-xs font-semibold uppercase tracking-wider text-white hover:bg-red-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-500",children:"Save name"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Press Enter to save"})]})]}):(0,a.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:t}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"saving"===r?"Saving changes...":"Autosave ready"}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:b(l)})]})]})}function h(){var e;let{project:t,updatePrompt:r}=d(),[l,i]=(0,s.useState)(null!==(e=t.prompt)&&void 0!==e?e:"");return(0,a.jsxs)("section",{className:"border-b border-gray-200 px-6 py-6",children:[(0,a.jsx)("header",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-gray-400",children:"Slide text"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Paste title + bullets so ODIN understands context."})]})}),(0,a.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,a.jsx)("textarea",{name:"slide-text",placeholder:"e.g. Title: Q4 metrics. Bullets: Revenue up 32%, CAC down 11%...",value:l,onChange:e=>{let t=e.target.value;i(t),r(t)},rows:6,className:"w-full resize-none rounded-2xl border border-gray-200 px-4 py-3 text-sm text-gray-900 placeholder:text-gray-400 focus-visible:border-red-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-100"}),(0,a.jsx)("footer",{className:"text-xs text-gray-500",children:(0,a.jsx)("p",{children:"Optional but highly recommended for precise visuals."})})]})]})}function v(e){let{slideImage:t,isUploading:r,uploadError:l,onSelectFile:i,onClearSlide:o}=e,n=(0,s.useRef)(null),c=!!t,d=()=>{var e;null===(e=n.current)||void 0===e||e.click()};return(0,a.jsxs)("section",{className:"border-b border-gray-200 px-6 py-6",children:[(0,a.jsxs)("header",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-gray-400",children:"Slide screenshot"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"PNG or JPG up to 10MB"})]}),(0,a.jsx)("button",{type:"button",onClick:d,className:"text-xs font-semibold text-red-600 hover:text-red-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-500",children:c?"Replace":"Browse"})]}),(0,a.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,a.jsxs)("button",{type:"button",onClick:d,className:"flex w-full flex-col items-center justify-center rounded-xl border border-dashed border-gray-300 px-4 py-10 text-center text-sm text-gray-600 transition hover:border-red-300 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-4 focus-visible:outline-red-500",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:c?r?"Uploading…":"Slide uploaded":"Drag your slide image here"}),(0,a.jsx)("span",{className:"mt-1 text-xs text-gray-500",children:c?"Click to replace or remove below":"or click to upload"})]}),c&&(0,a.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-gray-50 p-3",children:[(0,a.jsx)("div",{className:"aspect-video w-full overflow-hidden rounded-lg bg-white",children:(0,a.jsx)("img",{src:t,alt:"Uploaded slide preview",className:"h-full w-full object-contain"})}),(0,a.jsxs)("div",{className:"mt-3 flex items-center justify-between text-xs font-semibold uppercase tracking-widest text-gray-500",children:[(0,a.jsx)("button",{type:"button",onClick:d,className:"text-red-600 hover:text-red-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-500",children:"Replace"}),(0,a.jsx)("button",{type:"button",onClick:o,className:"text-gray-500 hover:text-gray-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-500",children:"Remove"})]})]}),l?(0,a.jsx)("p",{className:"text-xs font-semibold text-red-600",children:l}):(0,a.jsx)("p",{className:"text-xs text-gray-500",children:r?"Reading image…":"Supports .png / .jpg up to 10MB."}),(0,a.jsx)("input",{ref:n,type:"file",className:"sr-only",accept:"image/png,image/jpeg",onChange:e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&i(r),e.target.value=""}})]})]})}let y="/api",j=e=>new Promise((t,r)=>{let a=new FileReader;a.onload=()=>t(a.result),a.onerror=()=>r(a.error),a.readAsDataURL(e)});function w(){let{project:e,updateProject:t,renameProject:r}=d(),[l,o]=(0,s.useState)(!1),[n,c]=(0,s.useState)(null),u=async e=>{let a=e.trim(),s=a.length?a:"Untitled project";try{await r(s)}catch(e){t({name:s})}},x=async r=>{if(!r.type.startsWith("image/")){c("Only PNG or JPG images are supported.");return}if(r.size>10485760){c("File too large. Max size is 10MB.");return}c(null),o(!0);try{let a=await j(r);t({slideImage:a});let s=(0,i.bW)();if(!s)return;let l=await fetch("".concat(y,"/projects/").concat(e.id,"/slide-image"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({slide_image_base64:a})});if(!l.ok)return;await l.json()}catch(e){c("Could not load the selected image. Try again.")}finally{o(!1)}};return(0,a.jsxs)("aside",{className:"space-y-0 bg-white",children:[(0,a.jsx)(g,{name:e.name,autosaveStatus:e.autosaveStatus,createdAt:e.createdAt,onRename:u}),(0,a.jsx)(v,{slideImage:e.slideImage,isUploading:l,uploadError:n,onSelectFile:x,onClearSlide:()=>{c(null),t({slideImage:void 0});let r=(0,i.bW)();r&&fetch("".concat(y,"/projects/").concat(e.id,"/slide-image"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(r)}})}}),(0,a.jsx)(h,{}),(0,a.jsx)(f,{})]})}var N=r(9542);function S(){let{project:e}=d(),t=(0,l.useRouter)(),[r,o]=(0,s.useState)(!1),[n,c]=(0,s.useState)(!1),[u,x]=(0,s.useState)(null),[m,f]=(0,s.useState)(null);(0,s.useEffect)(()=>{f(document.body)},[]);let p=async()=>{x(null),c(!0);try{let r=(0,i.bW)();if(!r)throw Error("Authentication required.");if(!(await fetch("".concat("/api","/projects/").concat(e.id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(r)}})).ok)throw Error("Failed to delete project.");(0,i.mQ)(),(0,i.qt)(),t.push("/")}catch(e){x("Failed to delete the project. Please try again."),c(!1)}};return(0,a.jsxs)("header",{className:"sticky top-0 z-20 border-b border-gray-200 bg-white/95 px-8 py-4 backdrop-blur",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>t.push("/"),className:"rounded-full border border-gray-200 px-4 py-2 text-sm font-medium text-gray-700 hover:border-gray-300 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-500",children:"Back"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"saving"===e.autosaveStatus?"Saving changes...":"Autosave ready"})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-3 text-sm",children:(0,a.jsx)("button",{type:"button",className:"rounded-full border border-gray-200 px-4 py-2 font-medium text-gray-700 hover:border-gray-300 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-500",onClick:()=>{o(!0),x(null)},children:"Delete"})})]}),r&&m?(0,N.createPortal)((0,a.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/30 px-4",children:(0,a.jsxs)("div",{className:"w-full max-w-md rounded-2xl bg-white p-6 shadow-xl",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Delete project"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Sure you want to delete this project? This cannot be undone."}),u&&(0,a.jsx)("p",{className:"mt-3 text-xs font-semibold text-red-600",children:u}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>o(!1),className:"rounded-full border border-gray-200 px-4 py-2 text-sm font-medium text-gray-700 hover:border-gray-300",children:"No"}),(0,a.jsx)("button",{type:"button",onClick:p,disabled:n,className:"rounded-full bg-red-600 px-4 py-2 text-sm font-semibold text-white hover:bg-red-700 disabled:cursor-not-allowed disabled:bg-red-400",children:n?"Deleting...":"Yes"})]})]})}),m):null]})}function k(){let{project:e}=d(),t=!!e.slideImage;return(0,a.jsx)("div",{className:"relative aspect-video w-full overflow-hidden rounded-xl border border-gray-200 bg-gray-50",children:t?(0,a.jsx)("div",{className:"relative h-full w-full bg-black/5",children:(0,a.jsx)("img",{src:e.slideImage,alt:"Slide preview",className:"h-full w-full object-contain",draggable:!1})}):(0,a.jsx)("div",{className:"flex h-full items-center justify-center text-sm text-gray-500",children:"Upload a slide screenshot to preview it here"})})}let C=async(e,t)=>{try{let r=await fetch(e);if(!r.ok)throw Error("Failed to fetch image");let a=await r.blob(),s=URL.createObjectURL(a),l=document.createElement("a");l.href=s,l.download=t,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(s)}catch(t){window.open(e,"_blank","noopener")}},E=async e=>{if(!navigator.clipboard||!window.ClipboardItem){await navigator.clipboard.writeText(e);return}let t=await fetch(e),r=await t.blob();await navigator.clipboard.write([new ClipboardItem({[r.type]:r})])};function _(){let{project:e}=d(),t="generating"===e.generationStatus,r=[...e.results].slice(-12).reverse(),l=Array.from({length:e.pendingSlots}),i=r.length>0,o="error"===e.generationStatus&&e.generationError,[n,c]=(0,s.useState)(null),u=(0,s.useRef)(null);(0,s.useEffect)(()=>()=>{null!==u.current&&window.clearTimeout(u.current)},[]);let x=async(e,t)=>{try{await E(t),c(e),null!==u.current&&window.clearTimeout(u.current),u.current=window.setTimeout(()=>{c(null),u.current=null},3e3)}catch(e){}};return(0,a.jsx)("section",{className:"px-10 py-8",children:(0,a.jsxs)("div",{className:"mx-auto max-w-4xl",children:[(0,a.jsxs)("header",{className:"mb-6 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-gray-400",children:"Generated results"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:t?"Generating visuals sequentially...":"New flat/minimal options appear here as soon as they are ready."})]}),(0,a.jsx)("button",{type:"button",disabled:t,className:"rounded-full border border-gray-200 px-3 py-1 text-xs font-medium text-gray-600 hover:border-gray-300 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-500 disabled:cursor-not-allowed disabled:text-gray-400",children:"Refresh"})]}),o&&(0,a.jsx)("div",{className:"mb-6 rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:e.generationError}),i||l.length>0?(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-3",children:[l.map((e,t)=>(0,a.jsxs)("article",{className:"flex flex-col rounded-xl border border-gray-200 bg-white shadow-[0_1px_2px_rgba(15,23,42,0.06)]",children:[(0,a.jsx)("div",{className:"aspect-square border-b border-gray-100 bg-gray-50",children:(0,a.jsx)("div",{className:"flex h-full w-full items-center justify-center rounded-t-xl",children:(0,a.jsx)("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-gray-200 border-t-red-500"})})}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col gap-2 px-4 py-4",children:[(0,a.jsx)("div",{className:"h-10 w-full rounded-full bg-gray-200/70"}),(0,a.jsx)("div",{className:"h-10 w-full rounded-full bg-gray-100"})]})]},"placeholder-".concat(t))),r.map(e=>(0,a.jsxs)("article",{className:"flex flex-col rounded-xl border border-gray-200 bg-white shadow-[0_1px_2px_rgba(15,23,42,0.06)]",children:[(0,a.jsx)("div",{className:"aspect-square border-b border-gray-100 bg-gray-50",children:(0,a.jsx)("img",{src:e.imageUrl,alt:e.description,className:"h-full w-full rounded-t-xl object-cover"})}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col gap-2 px-4 py-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>x(e.id,e.imageUrl),className:"rounded-full bg-red-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-red-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-500",children:n===e.id?"Copied":"Copy"}),(0,a.jsx)("button",{type:"button",onClick:()=>{C(e.imageUrl,"odin-visual-".concat(e.id,".png"))},className:"rounded-full border border-gray-200 px-4 py-2 text-sm font-medium text-gray-700 hover:border-gray-300 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-500",children:"Download PNG"})]})]},e.id))]}):(0,a.jsx)("div",{className:"rounded-2xl border border-dashed border-gray-200 px-6 py-12 text-center text-sm text-gray-500",children:t?"Generating visuals...":"Click Generate to see visuals appear here."})]})})}function A(){let e=(0,l.useRouter)(),[t,r]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{if(!(0,i.bW)()){e.replace("/pricing?next=/workspace#login");return}r(!1)},[e]),t)?(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-white text-sm text-gray-500",children:"Redirecting to login..."}):(0,a.jsx)(c,{children:(0,a.jsx)("div",{className:"h-screen bg-white text-gray-900",children:(0,a.jsxs)("div",{className:"flex h-screen flex-col overflow-hidden",children:[(0,a.jsx)(S,{}),(0,a.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,a.jsx)("div",{className:"flex h-full w-[360px] min-h-0 flex-col overflow-y-auto border-r border-gray-200 bg-white",children:(0,a.jsx)(w,{})}),(0,a.jsxs)("main",{className:"flex-1 overflow-y-auto bg-white",children:[(0,a.jsx)("section",{className:"border-b border-gray-200 px-10 py-8",children:(0,a.jsxs)("div",{className:"mx-auto max-w-4xl",children:[(0,a.jsxs)("header",{className:"mb-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-gray-400",children:"Slide preview"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"16:9 canvas preview of your uploaded slide"})]}),(0,a.jsx)("div",{className:"flex items-center gap-2"})]}),(0,a.jsx)(k,{})]})}),(0,a.jsx)(_,{})]})]})]})})})}},6858:function(e,t,r){"use strict";r.d(t,{IW:function(){return p},NL:function(){return u},Rn:function(){return b},bW:function(){return f},dN:function(){return c},gY:function(){return n},ln:function(){return m},mQ:function(){return v},nt:function(){return g},qt:function(){return d},uB:function(){return x},v0:function(){return h}});let a="odin.workspace.project",s="odin.workspace.active_project",l="odin.workspace.auth_token",i="odin.workspace.auth_profile",o=()=>!0,n=()=>{let e=new Date().toISOString();return{id:"local-project",name:"Untitled project",createdAt:e,updatedAt:e,autosaveStatus:"ready",results:[],generationStatus:"idle",generationError:null,pendingSlots:0}},c=e=>{o()&&window.localStorage.setItem(s,e)},d=()=>{o()&&window.localStorage.removeItem(s)},u=()=>o()?window.localStorage.getItem(s):null,x=e=>{o()&&window.localStorage.setItem(l,e)},m=e=>{if(o())try{window.localStorage.setItem(i,JSON.stringify(e))}catch(e){}},f=()=>o()?window.localStorage.getItem(l):null,p=()=>{if(!o())return null;let e=window.localStorage.getItem(i);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},b=()=>{o()&&(window.localStorage.removeItem(l),window.localStorage.removeItem(i))},g=()=>{if(!o())return n();try{var e;let t=window.localStorage.getItem(a);if(!t)return n();let r=JSON.parse(t);return{...n(),...r,pendingSlots:null!==(e=r.pendingSlots)&&void 0!==e?e:0}}catch(e){return n()}},h=e=>{if(o())try{window.localStorage.setItem(a,JSON.stringify(e))}catch(e){}},v=()=>{o()&&window.localStorage.removeItem(a)}},7907:function(e,t,r){"use strict";var a=r(5313);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[971,69,744],function(){return e(e.s=5710)}),_N_E=e.O()}]);